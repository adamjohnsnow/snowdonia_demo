<div class="top-box project-header">
  <img src="fs_logo_title.jpg" width="320">
</div>
<div class="top-box project-header">
</div>
<div class="hide-print top-box project-header" style=>
  <h3>Actions</h3>
  <div onclick="printReport()" style="color: #322B6A; cursor: pointer;"><i class="fas fa-print"></i> PRINT</div>
  <a href="/project-summary?project_id=<%= @project.project.id %>&version_id=<%= @project.id %>">Back to Summary</a>
</div>
<h2><%= @project.project.title %> (<%= @project.version_name %>)</h2>
<h3>Draughting Sheet</h3>
<div class="top-box">
  <div class="table">
      <div class="table-row">
        <div class="table-cell">
          Project Title: <%= @project.project.title %>
        </div>
        <div class="table-cell">
          Status: <%= @project.status %>
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          Job Code: <%= @project.project.job_code %>
        </div>
        <div class="table-cell">
          Factory Settings PM: <%= @project.project.user.firstname %> <%= @project.project.user.surname %>
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          Workshop Deadline: <%= @project.project.workshop_deadline.strftime("%d/%m/%Y") %>
        </div>
        <div class="table-cell">
          Client: <%= @project.project.client.name %>
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          On Site Deadline: <%= @project.project.on_site.strftime("%d/%m/%Y") %>
        </div>
        <div class="table-cell">
          Site: <%= @project.project.site.name %>
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          Project Summary<br>
          <textarea cols="50" rows="3" name="summary"><%= @project.project.summary %></textarea>
        </div>
        <div class="table-cell">
          Technical Site Requirements<br>
          <textarea cols="50" rows="3" name="technical_requirements"><%= @project.project.technical_requirements %></textarea>
        </div>
      </div>
    </div>
</div>
<div class="table">
  <div class="table-row header-row">
    <div class="table-cell" style="width: 85px;">
      Costcode
    </div>
    <div class="table-cell" style="min-width: 280px;">
      Description
    </div>
    <div class="table-cell" style="width: 125px;">
      Unit
    </div>
    <div class="table-cell" style="width: 125px;">
      Qty
    </div>
  </div>
<% @materials.elements.all.each do |element| %>
  <div class="table-row">
    <div class="table-cell grey-cell">
    </div>
    <div class="table-cell grey-cell">
      <strong><%= element.title %></strong>
    </div>
    <div class="table-cell grey-cell">
    </div>
    <div class="table-cell grey-cell">
    </div>
  </div>
  <% @materials.all(:element_id => element.id).each do |mat|
    if mat.units > 0 %>
      <div class="table-row el<%= element.id %>" name="el-row">
        <div class="table-cell">
          <%= mat.material.costcode.code %>
        </div>
        <div class="table-cell">
          <%= mat.material.description %> (<%= mat.material.supplier %>)
        </div>
        <div class="table-cell">
          <%= mat.material.unit %>
        </div>
        <div class="table-cell">
          <%= mat.units %>
        </div>
      </div>
    <% end %>
    <% end %>
  <% end %>
</div>
<script>
var printReport = function(){
  document.getElementsByClassName('menu')[0].style.display = 'none';
  var hides1 = document.getElementsByClassName('hide-print');
  var hides2 = document.getElementsByClassName('arrows');
  for (i = 0; i < hides1.length; i++) {
    var remember1 = hides1[i].style.display
    hides1[i].style.display = 'none';
  }
  for (i = 0; i < hides2.length; i++) {
    var remember2 = hides2[i].style.display
    hides2[i].style.display = 'none';
  }
  document.body.style.backgroundColor = "white"
  window.print();
  document.getElementsByClassName('menu')[0].style.display = 'table-cell';
  for (i = 0; i < hides1.length; i++) {
    hides1[i].style.display = remember1;
  }
  for (i = 0; i < hides2.length; i++) {
    hides2[i].style.display = 'table-cell';
  }
  document.body.style.backgroundColor = "#eeeeee40"
}
</script>

<h3><a href="/project-summary?project_id=<%= @element.project_version.project_id %>">Back to <%= @element.project_version.project.title %> Summary</a></h3>
<form action="/update-element" method="post">
  <input type="hidden" name="element_id" value="<%= @element.id %>">
  <div class="table">
    <div class="table-body">
      <div class="table-row">
        <div class="table-cell">
          Element Name <input type="text" name="title" value="<%= @element.title %>">
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          Quantity<input type="number" name="quantity" value="<%= @element.quantity %>" style="width: 50px;">
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          Build Start <input type="date" name="build_start" value="<%= @element.build_start %>">
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          Build End <input type="date" name="build_end" value="<%= @element.build_end %>">
        </div>
      </div>
      <div class="table-row">
        <div class="table-cell">
          Include in Quote
          <% if @element.quote_include == true %>
            <input type="checkbox" name="quote_include" checked>
          <% else %>
            <input type="checkbox" name="quote_include">
          <% end %>
        </div>
      </div>
        <div class="table-row">
          <div class="table-cell">
            Notes<br>
            <textarea name="notes" cols="50" rows="4"><%= @element.notes %></textarea><br>
          </div>

      </div>
    </div>
</div>
  <br>
  <input class="btn" type="submit" value="Update Element">
</form>
<h3>Materials</h3>
<div class="table">
  <div class="table-body">
    <div class="table-row header-row">
      <div class="table-cell">Type</div>
      <div class="table-cell">Description</div>
      <div class="table-cell">Supplier</div>
      <div class="table-cell">Unit Cost</div>
      <div class="table-cell">Mark-up</div>
      <div class="table-cell">Units</div>
      <div class="table-cell">At Cost</div>
      <div class="table-cell">With Mark-up</div>
      <div class="table-cell">Notes</div>
      <div class="table-cell">Units After Drawing</div>
    </div>
    <% @materials.each do |unit| %>
      <div class="table-row">
        <div class="table-cell"><%= unit.material.category.type %></div>
        <div class="table-cell"><%= unit.material.description %></div>
        <div class="table-cell"><%= unit.material.supplier.company %></div>
        <div class="table-cell">£<%= sprintf('%.2f', unit.material.unit_cost) %></div>
        <div class="table-cell"><%= unit.markup * 100 %>%</div>
        <div class="table-cell"><%= unit.units %></div>
        <div class="table-cell">£<%= sprintf('%.2f', unit.units * unit.material.unit_cost) %></div>
        <div class="table-cell">£<%= sprintf('%.2f', unit.units * unit.material.unit_cost * (1 + unit.markup) ) %></div>
        <div class="table-cell"><%= unit.notes %></div>
        <div class="table-cell"><%= unit.units_after_drawing %></div>
        <a href="/material?id=<%= unit.id %>">edit</a>
      </div>
    <% end %>
  </div>
</div><br>
Add Material <form action="/material" method="get">
  <input class="btn" type="submit" value="Add Material">
</form>

<br>
<div class="table" style="max-width: 25%;">
  <div class="table-body">
    <div class="table-row header-row">
      <div class="table-cell">Materials at Cost</div>
      <div class="table-cell">With Markup</div>
      <div class="table-cell">Markup</div>
    </div>
    <div class="table-row">
    </div>
  </div>
</div>
<br>
<h3>Labour</h3>
<form>
<div class="table">
  <div class="table-body">
    <div class="table-row header-row">
      <div class="table-cell"></div>
      <div class="table-cell">Carpentry</div>
      <div class="table-cell">Steelwork</div>
      <div class="table-cell">Scenic</div>
      <div class="table-cell">Onsite Paint</div>
      <div class="table-cell">Onsite Days</div>
      <div class="table-cell">Draughting</div>
      <div class="table-cell">PM</div>
      <div class="table-cell">Total</div>
    </div>
      <div class="table-row">
        <% days = 0 %>
        <div class="table-cell">Days</div>
        <div class="table-cell">
          <% days += @element.element_labour.carpentry %>
          <input class="double-digit" type="text" name="carpentry" value="<%= @element.element_labour.carpentry %>">
        </div>
        <div class="table-cell">
          <% days += @element.element_labour.steelwork %>
          <input class="double-digit" type="text" name="steelwork" value="<%= @element.element_labour.steelwork %>">
        </div>
        <div class="table-cell">
          <% days += @element.element_labour.scenic %>
          <input class="double-digit" type="text" name="scenic" value="<%= @element.element_labour.scenic %>">
        </div>
        <div class="table-cell">
          <% days += @element.element_labour.onsite_paint %>
          <input class="double-digit" type="text" name="onsite_paint" value="<%= @element.element_labour.onsite_paint %>">
        </div>
        <div class="table-cell">
          <% days += @element.element_labour.on_site_day %>
          <input class="double-digit" type="text" name="on_site_day" value="<%= @element.element_labour.on_site_day %>">
        </div>
        <div class="table-cell">
          <% days += @element.element_labour.draughting %>
          <input class="double-digit" type="text" name="draughting" value="<%= @element.element_labour.draughting %>">
        </div>
        <div class="table-cell">
        <% days += @element.element_labour.project_management %>
          <input class="double-digit" type="text" name="project_management" value="<%= @element.element_labour.project_management %>">
        </div>
        <div class="table-cell"><%= days %></div>
      </div>
      <div class="table-row">
        <% cost = 0 %>
        <div class="table-cell">Rate</div>
        <div class="table-cell">
          <% cost += @element.element_labour.carpentry_cost * @element.element_labour.carpentry %>
          <input class="double-digit" type="text" name="carpentry_cost" value="£<%= sprintf('%.2f', @element.element_labour.carpentry_cost) %>">
        </div>
        <div class="table-cell">
          <% cost += @element.element_labour.steelwork_cost * @element.element_labour.steelwork %>
          <input class="double-digit" type="text" name="steelwork_cost" value="£<%= sprintf('%.2f', @element.element_labour.steelwork_cost) %>">
        </div>
        <% cost += @element.element_labour.scenic_cost * @element.element_labour.scenic %>
        <div class="table-cell">
          <input class="double-digit" type="text" name="scenic_cost" value="£<%= sprintf('%.2f', @element.element_labour.scenic_cost) %>">
        </div>
        <div class="table-cell">
          <% cost += @element.element_labour.onsite_paint_cost * @element.element_labour.onsite_paint %>
          <input class="double-digit" type="text" name="onsite_paint_cost" value="£<%= sprintf('%.2f', @element.element_labour.onsite_paint_cost) %>">
        </div>
        <div class="table-cell">
          <% cost += @element.element_labour.on_site_day_cost * @element.element_labour.on_site_day %>
          <input class="double-digit" type="text" name="on_site_day_cost" value="£<%= sprintf('%.2f', @element.element_labour.on_site_day_cost) %>">
        </div>
        <div class="table-cell">
          <% cost += @element.element_labour.draughting_cost * @element.element_labour.draughting %>
          <input class="double-digit" type="text" name="draughting_cost" value="£<%= sprintf('%.2f', @element.element_labour.draughting_cost) %>">
        </div>
        <div class="table-cell">
          <% cost += @element.element_labour.project_management_cost * @element.element_labour.project_management %>
          <input class="double-digit" type="text" name="project_management_cost" value="£<%= sprintf('%.2f', @element.element_labour.project_management_cost) %>">
        </div>
        <div class="table-cell"></div>
      </div>
      <div class="table-row">
        <div class="table-cell">Cost</div>
        <div class="table-cell">
          £<%= sprintf('%.2f', @element.element_labour.carpentry_cost * @element.element_labour.carpentry) %>
        </div>
        <div class="table-cell">
          £<%= sprintf('%.2f', @element.element_labour.steelwork_cost * @element.element_labour.steelwork) %>
        </div>
        <div class="table-cell">
          £<%= sprintf('%.2f', @element.element_labour.scenic_cost * @element.element_labour.scenic) %>
        </div>
        <div class="table-cell">
          £<%= sprintf('%.2f', @element.element_labour.onsite_paint_cost * @element.element_labour.onsite_paint) %>
        </div>
        <div class="table-cell">
          £<%= sprintf('%.2f', @element.element_labour.on_site_day_cost * @element.element_labour.on_site_day) %>
        </div>
        <div class="table-cell">
          £<%= sprintf('%.2f', @element.element_labour.draughting_cost * @element.element_labour.draughting) %>
        </div>
        <div class="table-cell">
          £<%= sprintf('%.2f', @element.element_labour.project_management_cost * @element.element_labour.project_management) %>
        </div>
        <div class="table-cell">£<%= sprintf('%.2f', cost ) %></div>
      </div>
  </div>
</div>
</form>



<br>
<div class="table" style="max-width: 25%;">
  <div class="table-body">
    <div class="table-row header-row">
      <div class="table-cell">Element at Cost</div>
      <div class="table-cell">With Markup</div>
      <div class="table-cell">Markup</div>
    </div>
    <div class="table-row">
      <div class="table-cell"></div>
      <div class="table-cell"></div>
      <div class="table-cell"></div>
    </div>
  </div>
</div>
